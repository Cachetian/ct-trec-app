//@ui5-bundle ct/trec/cttrecapp/Component-preload.js
sap.ui.require.preload({
	"ct/trec/cttrecapp/Component.js":function(){
sap.ui.define(["sap/ui/core/UIComponent","sap/ui/Device","ct/trec/cttrecapp/model/models"],function(t,e,s){"use strict";return t.extend("ct.trec.cttrecapp.Component",{metadata:{manifest:"json"},init:function(){t.prototype.init.apply(this,arguments);this.getRouter().initialize();this.setModel(s.createDeviceModel(),"device");this.setModel(s.createCheckTypesModel(),"ckt");this.setModel(s.createTypedCheckInModel(),"tci")},getContentDensityClass:function(){if(this._sContentDensityClass===undefined){if(document.body.classList.contains("sapUiSizeCozy")||document.body.classList.contains("sapUiSizeCompact")){this._sContentDensityClass=""}else if(!e.support.touch){this._sContentDensityClass="sapUiSizeCompact"}else{this._sContentDensityClass="sapUiSizeCozy"}}return this._sContentDensityClass}})});
},
	"ct/trec/cttrecapp/controller/App.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller"],function(t){"use strict";return t.extend("ct.trec.cttrecapp.controller.App",{onInit(){this.getView().addStyleClass(this.getOwnerComponent().getContentDensityClass())}})});
},
	"ct/trec/cttrecapp/controller/BaseController.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/routing/History","sap/ui/core/UIComponent","ct/trec/cttrecapp/model/formatter"],function(e,t,o,n){"use strict";return e.extend("ct.trec.cttrecapp.controller.BaseController",{formatter:n,getModel:function(e){return this.getView().getModel(e)},setModel:function(e,t){return this.getView().setModel(e,t)},getResourceBundle:function(){return this.getOwnerComponent().getModel("i18n").getResourceBundle()},navTo:function(e,t,o){this.getRouter().navTo(e,t,o)},getRouter:function(){return o.getRouterFor(this)},onNavBack:function(){const e=t.getInstance().getPreviousHash();if(e!==undefined){window.history.back()}else{this.getRouter().navTo("appHome",{},true)}}})});
},
	"ct/trec/cttrecapp/controller/MainView.controller.js":function(){
sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","sap/ui/util/Storage","../core/eventQueue"],function(e,t,s,o){"use strict";return e.extend("ct.trec.cttrecapp.controller.MainView",{onInit:function(){this.setModel(new t({message:"",messageCount:0,ui:{cmdPanelExpanded:false},settings:{use_remote_odata:false}}),"view");if(this.getModel("view").getProperty("/settings/use_remote_odata")){const e=this.getOwnerComponent().getModel();e.metadataLoaded(true).then(()=>{e.read("/CheckInTypes",{success:e=>{this.getModel("ckt").setProperty("/types",e.results)}});e.read("/TypedCheckIns",{success:e=>{this.getModel("tci").setProperty("/items",e.results)}});o.register("complete",()=>{sap.m.MessageToast.show("success")});o.register("create-CheckInTypes",e=>new Promise((t,s)=>{this.getModel().create("/CheckInTypes",e,{success:()=>{t()},error:e=>{sap.m.MessageToast.show(`failed with msg: ${e.message}`);s()}})}));o.register("create-TypedCheckIns",e=>new Promise((t,s)=>{this.getModel().create("/TypedCheckIns",e,{success:()=>{t()},error:e=>{sap.m.MessageToast.show(`failed with msg: ${e.message}`);s()}})}))})}else{this._oStorage=new s(s.Type.local,"trec_all_data");const e=this._preProcessImport(JSON.parse(this._oStorage.get("stored_data")));if(e){this.getOwnerComponent().getModel("ckt").setData(e.CheckInTypes);this.getOwnerComponent().getModel("tci").setData(e.TypedCheckIns)}}},onNewCheckInType:function(){const e={ID:this.getModel("ckt").getProperty("/types").length,text:this.getModel("ckt").getProperty("/new/text")};if(this.getModel("view").getProperty("/settings/use_remote_odata")){o.emit({event:"create-CheckInTypes",data:e})}this.getModel("ckt").getProperty("/types").push(e);this.getModel("ckt").setProperty("/new/text","");this.getModel("ckt").refresh()},onTypedCheckIn:function(e){const t={ID:this.getModel("tci").getProperty("/items").length,value:e.getSource().getBindingContext("ckt").getObject().text,timestamp:new Date};if(this.getModel("view").getProperty("/settings/use_remote_odata")){o.emit({event:"create-TypedCheckIns",data:t})}this.getModel("tci").getProperty("/items").push(t);this.getModel("tci").refresh()},onPushAllData:function(){if(this.getModel("view").getProperty("/settings/use_remote_odata")){const e={name:"pushAllData",value:JSON.stringify({CheckInTypes:this.getModel("ckt").getData().types,TypedCheckIns:this.getModel("tci").getData().items})};this.getModel().create("/AllDatas",e,{success:()=>{sap.m.MessageToast.show("success")},error:e=>{sap.m.MessageToast.show(`failed with msg: ${e.message}`)}})}},onPullAllData:function(){if(this.getModel("view").getProperty("/settings/use_remote_odata")){this.getModel().read("/AllDatas",{success:e=>{const{CheckInTypes:t,TypedCheckIns:s}=JSON.parse(e.results[0].value);const o=this._preProcessImport({CheckInTypes:{types:t},TypedCheckIns:{items:s}});this.getModel("ckt").setData(o.CheckInTypes);this.getModel("tci").setData(o.TypedCheckIns)},error:e=>{sap.m.MessageToast.show(`failed with msg: ${e.message}`)}})}},onStoreAllData:function(){const e=JSON.stringify({CheckInTypes:this.getModel("ckt").getData(),TypedCheckIns:this.getModel("tci").getData()});this._oStorage.put("stored_data",e)},onClearAllData:function(){this._oStorage.remove("stored_data");sap.m.MessageToast.show("cleared")},onExportAllData:function(){const e={CheckInTypes:this.getModel("ckt").getData(),TypedCheckIns:this.getModel("tci").getData()};this.getModel("view").setProperty("/message",JSON.stringify(e,null,2))},onImportAllData:function(){const e=this._preProcessImport(JSON.parse(this.getModel("view").getProperty("/message")));this.getModel("ckt").setData(e.CheckInTypes);this.getModel("tci").setData(e.TypedCheckIns)},onCheckInItemPress:function(e){const t=e.getSource().getBindingContext("tci");if(!this._dialog){this._dialog=new sap.m.Dialog({title:"Comment {tci>ID}",content:[new sap.m.Input({value:"{tci>comment}"})],endButton:new sap.m.Button({text:"X",press:()=>{this._dialog.unbindElement();this._dialog.close()}})});this._dialog.addStyleClass("sapUiResponsivePadding--content sapUiResponsivePadding--header sapUiResponsivePadding--footer sapUiResponsivePadding--subHeader")}const s=this._dialog;s.setModel(this.getModel("tci"),"tci");s.bindElement({path:t.getPath(),model:"tci"});s.open()},onOpenMessage:function(){if(!this._msgDialog){this._msgDialog=new sap.m.Dialog({title:"Message {view>messageCount}",stretch:true,content:[new sap.m.TextArea({width:"100%",height:"100%",rows:16,value:"{view>message}"})],endButton:new sap.m.Button({text:"X",press:()=>{this._msgDialog.unbindElement();this._msgDialog.close()}})});this._msgDialog.addStyleClass("sapUiResponsivePadding--content sapUiResponsivePadding--header sapUiResponsivePadding--footer sapUiResponsivePadding--subHeader")}const e=this._msgDialog;e.setModel(this.getModel("view"),"view");e.bindElement({path:"/",model:"view"});e.open()},onCopyMessage:function(){this.byId("msgTextArea").getDomRef().firstChild.firstChild.select();navigator.clipboard.writeText(this.getModel().getProperty("/message")).then(()=>{sap.m.MessageToast.show("copied")},()=>{sap.m.MessageToast.show("copy failed")})},_preProcessImport:function(e){if(e?.TypedCheckIns?.items){e.TypedCheckIns.items.forEach(e=>{e.timestamp=new Date(e.timestamp)})}return e},formatEmptyText:function(e){return e?e:"-"}})});
},
	"ct/trec/cttrecapp/core/eventQueue.js":function(){
sap.ui.define([],function(){"use strict";const t=[];const n=[];const e=[];const i={};return{emit:function(e){t.push(e);if(t.length>0&&n.length===0){setTimeout(()=>{this.notify()},200)}},notify:function(){if(t.length>0&&n.length===0){for(const e of t){n.push(e)}t.length=0;this.start()}else if(t.length>0&&n.length>0){}},start:function(){if(n.length>0&&e.length<n.length){this.next()}},next:function(){const t=n[e.length];this.process(t).then(()=>{e.push(t)}).finally(()=>{setTimeout(()=>{if(n.length>0&&e.length<n.length){this.next()}else{this.complete()}},20)})},process:function(t){return i[t.event](t.data)},complete:function(){n.length=0;e.length=0;if(t.length>0){this.notify()}else{i["complete"]()}},register:function(t,n){i[t]=n}}});
},
	"ct/trec/cttrecapp/i18n/i18n.properties":'# This is the resource bundle for ct.trec.cttrecapp\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=CT TREC\n\n#YDES: Application description\nappDescription=\\u8ba1\\u65f6\\u6253\\u5361\\u7684\\u5e94\\u7528\\u7a0b\\u5e8f\n#XTIT: Main view title\ntitle=\\u8ba1\\u65f6\\u6253\\u5361',
	"ct/trec/cttrecapp/manifest.json":'{"_version":"1.42.0","sap.app":{"id":"ct.trec.cttrecapp","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","dataSources":{"mainService":{"uri":"/v2/service/record/","type":"OData","settings":{"odataVersion":"2.0"}}},"resources":"resources.json","sourceTemplate":{"id":"@sap-ux/fiori-freestyle-writer:basic","version":"0.14.9"}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.102.0","libs":{"sap.m":{},"sap.ui.core":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"ct.trec.cttrecapp.i18n.i18n"}},"":{"dataSource":"mainService","settings":{}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","viewType":"XML","async":true,"viewPath":"ct.trec.cttrecapp.view","controlAggregation":"pages","controlId":"app","clearControlAggregation":false},"routes":[{"name":"RouteMainView","pattern":":?query:","target":["TargetMainView"]}],"targets":{"TargetMainView":{"viewType":"XML","transition":"slide","clearControlAggregation":false,"viewId":"MainView","viewName":"MainView"}}},"rootView":{"viewName":"ct.trec.cttrecapp.view.App","type":"XML","async":true,"id":"App"}}}',
	"ct/trec/cttrecapp/model/formatter.js":function(){
sap.ui.define([],function(){"use strict";return{}});
},
	"ct/trec/cttrecapp/model/models.js":function(){
sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,t){"use strict";return{createDeviceModel:function(){const n=new e(t);n.setDefaultBindingMode("OneWay");return n},createCheckTypesModel:function(){const t=new e({new:{text:""},types:[{text:"Do"}]});t.setDefaultBindingMode("TwoWay");return t},createTypedCheckInModel:function(){const t=new e({items:[{value:"Do",timestamp:new Date}]});t.setDefaultBindingMode("TwoWay");return t}}});
},
	"ct/trec/cttrecapp/view/App.view.xml":'<mvc:View controllerName="ct.trec.cttrecapp.controller.App" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:mvc="sap.ui.core.mvc" displayBlock="true" xmlns="sap.m"><App id="app"></App></mvc:View>\n',
	"ct/trec/cttrecapp/view/MainView.view.xml":'<mvc:View controllerName="ct.trec.cttrecapp.controller.MainView" xmlns:mvc="sap.ui.core.mvc"\n    displayBlock="true" xmlns="sap.m"><Page id="page" title="{i18n>title}"><headerContent><OverflowToolbar><ToolbarSpacer></ToolbarSpacer><Switch state="{view>/settings/use_remote_odata}"></Switch></OverflowToolbar></headerContent><content><Toolbar><Label text="打卡类型" showColon="true" labelFor="checkInTypeInput" width="4rem"></Label><Input id="checkInTypeInput" value="{ckt>/new/text}" width="12rem"></Input><Button text="添加" press="onNewCheckInType" type="Transparent"></Button></Toolbar><OverflowToolbar content="{ckt>/types}"><Button text="{ckt>text}" press="onTypedCheckIn"></Button></OverflowToolbar><Panel id="cmdPanel" expandable="true" expanded="{view>/ui/cmdPanelExpanded}"><headerToolbar><OverflowToolbar><ToolbarSpacer /><Button text="Open" press="onOpenMessage"\n                            visible="{= !${view>/ui/cmdPanelExpanded}}"></Button></OverflowToolbar></headerToolbar><content><OverflowToolbar><ToolbarSpacer /><Button text="Copy" press="onCopyMessage"></Button><Button text="Push" press="onPushAllData"\n                            enabled="{view>/settings/use_remote_odata}"></Button><Button text="Pull" press="onPullAllData"\n                            enabled="{view>/settings/use_remote_odata}"></Button><Button text="Store" press="onStoreAllData"></Button><Button text="Clear" press="onClearAllData"></Button><Button text="Export" press="onExportAllData"></Button><Button text="Import" press="onImportAllData"></Button></OverflowToolbar><TextArea id="msgTextArea" value="{view>/message}" width="100%" height="12rem"></TextArea></content></Panel><Panel><content><Table\n                        items="{ path: \'tci>/items\',\n                            sorter: {\n                                path: \'timestamp\',\n                                descending: true\n                            }}"\n                        autoPopinMode="true"><columns><Column width="8rem"><Text text="做" /></Column><Column width="10rem" popinDisplay="WithoutHeader"><Text text="时间" /></Column></columns><items><ColumnListItem vAlign="Middle" type="Active" press="onCheckInItemPress"><cells><ObjectIdentifier title="{tci>value}"\n                                        text="{\n                                        path:\'tci>comment\',\n                                        formatter : \'.formatEmptyText\'\n                                    }" /><DateTimePicker\n                                        value="{\n                                            path:\'tci>timestamp\',\n                                            type:\'sap.ui.model.type.DateTime\',\n                                            formatOptions: {\n                                                \'style\': \'short\'\n                                            }\n                                        }" /></cells></ColumnListItem></items></Table></content></Panel></content><footer><Bar></Bar></footer></Page></mvc:View>'
});
//# sourceMappingURL=Component-preload.js.map
